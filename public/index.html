<!DOCTYPE html>
<html>
<head>
    <title>YouTube Info Test</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial; padding: 20px; }
        input { width: 400px; padding: 10px; }
        button { padding: 10px 20px; }
        #result { margin-top: 20px; white-space: pre-wrap; background: #f5f5f5; padding: 15px; }
    </style>
</head>
<body>
    <h1>Teste YouTube Info API</h1>
    <input type="text" id="url" placeholder="Cole URL do YouTube" value="https://www.youtube.com/watch?v=dQw4w9WgXcQ">
    <button onclick="getInfo()">Obter Informações</button>
    <div id="result">Resultado aparecerá aqui...</div>

    <script>
        async function getInfo() {
            const url = document.getElementById('url').value;
            const resultDiv = document.getElementById('result');
            
            resultDiv.textContent = 'Carregando...';
            
            try {
                const response = await fetch(`/api/info?url=${encodeURIComponent(url)}`);
                const data = await response.json();
                
                if (data.success) {
                    resultDiv.textContent = JSON.stringify(data, null, 2);
                } else {
                    resultDiv.textContent = `Erro: ${data.error}`;
                }
            } catch (error) {
                resultDiv.textContent = `Falha na requisição: ${error}`;
            }
        }
        
        // Teste inicial
        setTimeout(() => {
            fetch('/api/health')
                .then(r => r.json())
                .then(data => console.log('API Health:', data));
        }, 1000);
    </script>
</body>
</html>